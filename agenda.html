<!DOCTYPE HTML>
<!--
	Massively by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Agenda</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<meta name="description" content="Bekijk de agenda van Anyway. Waar treden wij op? Kom luisteren naar ons a capella trio in theaters, kerken en op festivals." />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<a href="index.html" class="logo">Anyway</a>
					</header>

				<!-- Nav -->
					<nav id="nav">
						<!-- Navigation loaded via JS -->
					</nav>

				<!-- Main -->
					<div id="main">

						<!-- Post -->
							<section class="post">
								<header class="major">
									<h1>Agenda</h1>
								</header>
																<div class="table-wrapper">
									<table>
										<thead>
											<tr>
												<th>Datum</th>
												<th>Locatie</th>
												<th>Evenement</th>
											</tr>
										</thead>
										<tbody id="agenda-body">
											<!-- Agenda items will be loaded here dynamically -->
										</tbody>
									</table>
								</div>
								
								<!-- Pagination Controls -->
								<div class="pagination-controls" style="text-align: center; margin-top: 2em;">
									<a id="prev-btn" class="button small disabled">Vorige</a>
									<span id="page-info" style="margin: 0 1em;">Pagina 1</span>
									<a id="next-btn" class="button small">Volgende</a>
								</div>

								<!-- Book Us CTA -->
								<div style="text-align: center; margin-top: 2em;">
									<a href="mailto:anywaytexel@xs4all.nl" class="button primary icon solid fa-envelope">Boek Ons</a>
								</div>

								<!-- <div class="image main"><img src="images/pic01.jpg" alt="" /></div> -->
							</section>

					</div>

				<!-- Footer -->
					<footer id="footer">
						<!-- Contact info loaded via JS -->
					</footer>

				<!-- Copyright -->
					<div id="copyright">
						<ul><li>Design: <a href="https://html5up.net">HTML5 UP</a></li></ul>
					</div>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/utils.js"></script>
			<script src="assets/js/nav.js"></script>
			<script src="assets/js/main.js"></script>
			<script src="assets/js/agenda_data.js"></script>
			<script src="assets/js/contact-info.js"></script>
			<script>
				document.addEventListener('DOMContentLoaded', function() {
					const tbody = document.getElementById('agenda-body');
					const prevBtn = document.getElementById('prev-btn');
					const nextBtn = document.getElementById('next-btn');
					const pageInfo = document.getElementById('page-info');
					const tableWrapper = document.querySelector('.table-wrapper');
					const table = tableWrapper.querySelector('table');
					
					const itemsPerPage = 10;
					let currentPage = 1;
					let nextShowIndex = -1;
					
					function createRow(item, index) {
						const row = document.createElement('tr');
						
						if (isPast(item.date)) {
							row.classList.add('past-event');
						} else if (index === nextShowIndex) {
							row.classList.add('next-show');
							// Add a "Next Show" badge or label if desired, or just rely on styling
						}

						const dateCell = document.createElement('td');
						dateCell.textContent = item.date;
						if (index === nextShowIndex) {
							dateCell.innerHTML += ' <span class="next-show-badge">Eerstvolgende</span>';
						}
						row.appendChild(dateCell);
						
						const locationCell = document.createElement('td');
						locationCell.textContent = item.location;
						row.appendChild(locationCell);
						
						const eventCell = document.createElement('td');
						eventCell.textContent = item.event;
						row.appendChild(eventCell);
						
						return row;
					}

					function renderTable(page) {
						tbody.innerHTML = '';
						
						const start = (page - 1) * itemsPerPage;
						const end = start + itemsPerPage;
						const paginatedItems = agendaData.slice(start, end);
						
						paginatedItems.forEach((item, i) => {
							tbody.appendChild(createRow(item, start + i));
						});

						// Update controls
						pageInfo.textContent = `Pagina ${currentPage} van ${Math.ceil(agendaData.length / itemsPerPage)}`;
						
						if (currentPage === 1) {
							prevBtn.classList.add('disabled');
						} else {
							prevBtn.classList.remove('disabled');
						}
						
						if (end >= agendaData.length) {
							nextBtn.classList.add('disabled');
						} else {
							nextBtn.classList.remove('disabled');
						}
					}

					if (typeof agendaData !== 'undefined') {
						// Calculate next show index (assuming descending order: Future -> Past)
						for (let i = 0; i < agendaData.length; i++) {
							if (isPast(agendaData[i].date)) {
								if (i > 0) {
									nextShowIndex = i - 1;
								}
								break;
							}
						}
						// Edge case: All future
						if (nextShowIndex === -1 && agendaData.length > 0 && !isPast(agendaData[agendaData.length-1].date)) {
							nextShowIndex = agendaData.length - 1;
						}

						// If the next show is on a later page, maybe we should jump to that page?
						// For now, let's just start at page 1. If the next show is far in the future (top of list), it will be on page 1.
						// If the next show is the *last* future event, it might be on page 2 or 3 if there are many future events.
						// But usually "Next Show" is the one closest to today.
						// If the list is descending (2026, 2025...), the closest to today is the *last* one before the past ones.
						// So it could be deep in the list.
						
						// Let's calculate which page the next show is on and start there.
						if (nextShowIndex !== -1) {
							currentPage = Math.floor(nextShowIndex / itemsPerPage) + 1;
						}


						// Calculate max height
						let maxTableHeight = 0;
						const totalPages = Math.ceil(agendaData.length / itemsPerPage);
						
						if (totalPages === 0) {
							tbody.innerHTML = '';
							maxTableHeight = table.offsetHeight;
						} else {
							// Render each page to find the tallest one
							for (let i = 1; i <= totalPages; i++) {
								tbody.innerHTML = '';
								const start = (i - 1) * itemsPerPage;
								const end = start + itemsPerPage;
								const items = agendaData.slice(start, end);
								items.forEach((item, idx) => tbody.appendChild(createRow(item, start + idx)));
								
								const height = table.offsetHeight;
								if (height > maxTableHeight) {
									maxTableHeight = height;
								}
							}
						}
						
						// Set fixed height on wrapper to prevent jumping
						// Add a buffer to prevent vertical scrollbars due to sub-pixel rendering
						tableWrapper.style.height = (maxTableHeight + 20) + 'px';
						tableWrapper.style.overflowY = 'hidden';

						// Reset on resize to prevent content cutoff
						window.addEventListener('resize', function() {
							tableWrapper.style.height = 'auto';
							tableWrapper.style.overflowY = 'visible';
						});
						
						// Render initial page (which is now set to the page containing the next show)
						renderTable(currentPage);

						prevBtn.addEventListener('click', (e) => {
							e.preventDefault();
							if (currentPage > 1) {
								currentPage--;
								renderTable(currentPage);
							}
						});

						nextBtn.addEventListener('click', (e) => {
							e.preventDefault();
							if ((currentPage * itemsPerPage) < agendaData.length) {
								currentPage++;
								renderTable(currentPage);
							}
						});

					} else {
						console.error('Agenda data not found.');
					}
				});
			</script>

	</body>
</html>